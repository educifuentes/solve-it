<div class="meeting-show">
  <div class="headers-meeting">
    <h1>All set, <%= @order.user.name %>!</h1>
    <h2>Your technician will help you with: <strong><%= @order.services_technician.service.name %> </strong> </h2>
  </div>
    <div class="meeting-background">
      <div id="meet" style="width: 100%; height: 100%;"></div>
    </div>
    <script src='https://meet.jit.si/external_api.js'></script>
    <script>
      const serviceName = "<%=  @order.services_technician.service.name %>";
      const techName = "<%=  @order.services_technician.user.name %>";
      const customerName = "<%=  @order.user.name %>";
      const customerEmail = "<%=  @order.user.email %>";
      const roomName = `${techName}SolutionRoom`;

      const domain = 'meet.jit.si';
      const options = {

        roomName: roomName,
        width: 700,
        height: 500,
        parentNode: document.querySelector('#meet'),
        userInfo: {
          email: customerEmail,
          displayName: customerName
      }
        };

        const api = new JitsiMeetExternalAPI(domain, options);


        api.addListener('videoConferenceLeft', (data) => {
          window.location.href = "<%= order_path(@order) %>";

        });
    </script>
  </div>
